import{h as z,c as p,o as u,a as t,b as i,F as f,j as y,n as m,w as n,r as c,k as d,t as M,l as P,m as v,p as C,q as _,s as k}from"./chunk-vendors.c9FUtYPc.js";import{_ as B}from"./index.Cw0fWXUa.js";const E={components:{DocumentCopy:z},mounted(){this.getEnableMfa(),this.getGoogleClientId(),this.isDarkMode=localStorage.getItem("theme")==="dark",this.loadGoogleSDK()},computed:{themeText(){return this.isDarkMode?"å¼€ç¯ğŸ’¡":"å…³ç¯ğŸŒ™"}},data(){return{loginParams:{account:"",password:"",mfaCode:null},loading:!1,googleLoading:!1,enableMfa:!1,googleClientId:"",isDarkMode:localStorage.getItem("theme")==="dark"}},methods:{loadGoogleSDK(){if(document.getElementById("google-sdk"))return;const o=document.createElement("script");o.id="google-sdk",o.src="https://accounts.google.com/gsi/client",o.async=!0,o.defer=!0,document.head.appendChild(o)},async getGoogleClientId(){try{const o=await this.$axios.post("/sys/getGoogleClientId",{});o.data.success&&o.data.data&&(this.googleClientId=o.data.data,this.initializeGoogleLogin())}catch(o){console.log("Google login not configured:",o.message),this.googleClientId=""}},initializeGoogleLogin(){const o=setInterval(()=>{window.google&&window.google.accounts&&(clearInterval(o),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?console.log("Mobile device detected, using redirect flow"):(window.google.accounts.id.initialize({client_id:this.googleClientId,callback:this.handleGoogleCallback,auto_select:!1,cancel_on_tap_outside:!0,ux_mode:"popup"}),this.$nextTick(()=>{const l=document.getElementById("google-signin-button");l&&window.google.accounts.id.renderButton(l,{type:"standard",theme:"outline",size:"large",width:0})})))},100);setTimeout(()=>clearInterval(o),1e4)},triggerGoogleLogin(){if(!window.google||!window.google.accounts){d({message:"Google SDK åŠ è½½ä¸­ï¼Œè¯·ç¨åå†è¯•",type:"warning",duration:2e3});return}if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))window.google.accounts.id.initialize({client_id:this.googleClientId,callback:this.handleGoogleCallback,ux_mode:"redirect",login_uri:window.location.origin+"/google-callback"}),sessionStorage.setItem("google_login_pending","true"),window.google.accounts.id.prompt();else{const e=document.querySelector('#google-signin-button > div[role="button"]');e?e.click():window.google.accounts.id.prompt(l=>{(l.isNotDisplayed()||l.isSkippedMoment())&&console.log("One Tap not available, using fallback")})}},async handleGoogleCallback(o){this.googleLoading=!0;try{const e=await this.$axios.post("/sys/googleLogin",{credential:o.credential});if(e.data.success){d({message:e.data.msg||"Google ç™»å½•æˆåŠŸ",type:"success",duration:2e3});let l=e.data.data;sessionStorage.setItem("token",l.token),localStorage.setItem("currentVersion",l.currentVersion),localStorage.setItem("latestVersion",l.latestVersion),setTimeout(()=>{this.$router.push("/dashboard")},1e3)}else d({message:e.data.msg||"Google ç™»å½•å¤±è´¥",type:"error",duration:2e3})}catch(e){console.error("Google login error:",e),d({message:"Google ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•",type:"error",duration:2e3})}finally{this.googleLoading=!1}},async pasteFromClipboard(){try{if(navigator.clipboard&&navigator.clipboard.readText){const o=await navigator.clipboard.readText();o&&(this.loginParams.mfaCode=o.trim(),d({message:"éªŒè¯ç å·²ç²˜è´´",type:"success",duration:1500}))}}catch{d({message:"ç²˜è´´å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥",type:"warning",duration:2e3})}},getGridLineStyle(o,e){const l=o*10+"%",g=Math.random()*3;return e?{top:l,animationDelay:`${g}s`}:{left:l,animationDelay:`${g}s`}},getStarStyle(o){const e=Math.random()*3+1,l=Math.random()*3+2,g=Math.random()*5;return{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,width:`${e}px`,height:`${e}px`,animationDelay:`${g}s`,animationDuration:`${l}s`}},getShapeStyle(o){const e=o*2,l=15+o*3,g=Math.random()*100,r=Math.random()*100;return{left:`${g}%`,top:`${r}%`,animationDelay:`${e}s`,animationDuration:`${l}s`}},getCodeColumnStyle(o){const e=o*6.67+"%",l=10+Math.random()*5,g=Math.random()*8;return{left:e,animationDelay:`${g}s`,animationDuration:`${l}s`}},getRandomChar(){const o="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789<>{}[]()@#$%&*";return o[Math.floor(Math.random()*o.length)]},toggleTheme(){const o=document.documentElement.classList.toggle("dark");localStorage.setItem("theme",o?"dark":"light"),this.isDarkMode=o},getEnableMfa(){this.$axios.post("/sys/getEnableMfa",{}).then(o=>{o.data.success&&(this.enableMfa=o.data.data)}).catch(o=>{console.log("MFA config not available:",o.message),this.enableMfa=!1})},async login(){if(this.loginParams.account==="yohann"&&this.loginParams.password==="yohann"){d({message:"è¯¥è´¦å·ä¸ºé»˜è®¤è´¦å·ï¼Œè¯·ä¿®æ”¹å¹¶é‡å¯åå†å°è¯•ç™»å½•",type:"error",duration:2e3});return}this.loading=!0;try{const o=await this.$axios.post("/sys/login",{...this.loginParams});if(o.data.success){d({message:o.data.msg,type:"success",duration:2e3});let e=o.data.data;sessionStorage.setItem("token",e.token),localStorage.setItem("currentVersion",e.currentVersion),localStorage.setItem("latestVersion",e.latestVersion),setTimeout(()=>{this.$router.push("/dashboard")},1e3)}else d({message:o.data.msg,type:"error",duration:2e3}),this.loading=!1}catch(o){console.error("Error:",o),d({message:"ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•",type:"error",duration:2e3}),this.loading=!1}}}},T={class:"login-container"},A={class:"background"},F={class:"grid-lines"},O={class:"stars-container"},R={class:"floating-shapes"},K={class:"code-rain"};function N(o,e,l,g,r,s){const w=c("el-input"),h=c("el-form-item"),S=c("DocumentCopy"),x=c("el-icon"),b=c("el-button"),I=c("el-form"),L=c("el-card"),G=c("el-link"),D=c("el-footer");return u(),p("div",T,[t("div",A,[t("div",F,[(u(),p(f,null,y(10,a=>t("div",{class:"grid-line horizontal",key:"h-"+a,style:m(s.getGridLineStyle(a,!0))},null,4)),64)),(u(),p(f,null,y(10,a=>t("div",{class:"grid-line vertical",key:"v-"+a,style:m(s.getGridLineStyle(a,!1))},null,4)),64))]),t("div",O,[(u(),p(f,null,y(50,a=>t("div",{class:"star",key:"star-"+a,style:m(s.getStarStyle(a))},null,4)),64))]),e[3]||(e[3]=t("div",{class:"scan-line"},null,-1)),e[4]||(e[4]=t("div",{class:"glow glow-1"},null,-1)),e[5]||(e[5]=t("div",{class:"glow glow-2"},null,-1)),t("div",R,[t("div",{class:"shape hexagon",style:m(s.getShapeStyle(1))},null,4),t("div",{class:"shape circle",style:m(s.getShapeStyle(2))},null,4),t("div",{class:"shape square",style:m(s.getShapeStyle(3))},null,4)]),t("div",K,[(u(),p(f,null,y(15,a=>t("div",{class:"code-column",key:"code-"+a,style:m(s.getCodeColumnStyle(a))},[(u(),p(f,null,y(20,V=>t("span",{key:V},M(s.getRandomChar()),1)),64))],4)),64))])]),i(L,{class:"login-card"},{default:n(()=>[e[13]||(e[13]=t("div",{class:"oracle-logo"},[t("svg",{viewBox:"0 0 397 57",xmlns:"http://www.w3.org/2000/svg"},[t("g",{fill:"#C74634"},[t("ellipse",{cx:"28.5",cy:"28.5",rx:"26",ry:"19",fill:"none",stroke:"#C74634","stroke-width":"5"}),t("path",{d:"M70 10 L70 47 M70 10 L90 10 Q98 10 98 18 Q98 25 90 25 L70 25 M90 25 L98 47"}),t("path",{d:"M110 47 L120 10 L130 47 M113 32 L127 32"}),t("path",{d:"M160 18 Q150 10 140 18 Q135 28.5 140 39 Q150 47 160 39"}),t("path",{d:"M175 10 L175 47 L190 47"}),t("path",{d:"M205 10 L235 10 M205 10 L205 47 M205 28.5 L230 28.5 M205 47 L235 47"})]),t("text",{x:"250",y:"40","font-family":"Arial, sans-serif","font-size":"28","font-weight":"600",fill:"#312D2A"},"Cloud")])],-1)),e[14]||(e[14]=t("h2",{class:"login-title"},"OCI Helper",-1)),e[15]||(e[15]=t("p",{class:"login-subtitle"},"Oracle Cloud Infrastructure Management",-1)),i(I,{onSubmit:v(s.login,["prevent"]),onKeydown:P(v(s.login,["prevent"]),["enter"])},{default:n(()=>[i(h,{label:"","label-width":"0%"},{default:n(()=>[i(w,{modelValue:r.loginParams.account,"onUpdate:modelValue":e[0]||(e[0]=a=>r.loginParams.account=a),placeholder:"è´¦å·",clearable:"",size:"large"},{prefix:n(()=>e[6]||(e[6]=[t("i",{class:"el-icon-user"},null,-1)])),_:1},8,["modelValue"])]),_:1}),i(h,{label:"","label-width":"0%"},{default:n(()=>[i(w,{"show-password":"",modelValue:r.loginParams.password,"onUpdate:modelValue":e[1]||(e[1]=a=>r.loginParams.password=a),placeholder:"å¯†ç ",type:"password",clearable:"",size:"large"},{prefix:n(()=>e[7]||(e[7]=[t("i",{class:"el-icon-lock"},null,-1)])),_:1},8,["modelValue"])]),_:1}),r.enableMfa?(u(),C(h,{key:0},{default:n(()=>[i(w,{"show-password":"",modelValue:r.loginParams.mfaCode,"onUpdate:modelValue":e[2]||(e[2]=a=>r.loginParams.mfaCode=a),placeholder:"MFAéªŒè¯ç ",clearable:"",size:"large"},{prefix:n(()=>e[8]||(e[8]=[t("i",{class:"el-icon-mobile-phone"},null,-1)])),suffix:n(()=>[i(x,{onClick:s.pasteFromClipboard,class:"paste-icon",title:"ç²˜è´´éªŒè¯ç "},{default:n(()=>[i(S)]),_:1},8,["onClick"])]),_:1},8,["modelValue"])]),_:1})):_("",!0),i(h,{style:{"text-align":"center"},class:"login-button-container"},{default:n(()=>[i(b,{type:"primary",onClick:s.login,loading:r.loading,class:"login-button",size:"large"},{default:n(()=>e[9]||(e[9]=[k("Sign In")])),_:1},8,["onClick","loading"])]),_:1}),e[12]||(e[12]=t("div",{class:"login-divider-wrapper"},[t("div",{class:"divider-line"}),t("span",{class:"divider-text"},"OR"),t("div",{class:"divider-line"})],-1)),r.googleClientId?(u(),C(h,{key:1,style:{"text-align":"center"}},{default:n(()=>[e[11]||(e[11]=t("div",{id:"google-signin-button",style:{position:"absolute",left:"-9999px",opacity:"0"}},null,-1)),i(b,{onClick:s.triggerGoogleLogin,loading:r.googleLoading,class:"google-button",size:"large"},{default:n(()=>e[10]||(e[10]=[t("svg",{class:"google-icon",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),t("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),t("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),t("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})],-1),t("span",null,"Sign in with Google",-1)])),_:1},8,["onClick","loading"])]),_:1})):_("",!0)]),_:1},8,["onSubmit","onKeydown"])]),_:1}),i(D,{class:"login-footer"},{default:n(()=>[i(G,{href:"https://github.com/Yohann0617",target:"_blank"},{default:n(()=>e[16]||(e[16]=[k("Â© Yohann All Rights Reserved")])),_:1}),i(b,{onClick:s.toggleTheme,class:"theme-button",link:""},{default:n(()=>[k(M(s.themeText),1)]),_:1},8,["onClick"])]),_:1})])}const U=B(E,[["render",N],["__scopeId","data-v-56b5c6a1"]]);export{U as default};
