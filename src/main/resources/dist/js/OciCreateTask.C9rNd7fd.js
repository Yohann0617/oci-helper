import{_ as y}from"./index.Cw0fWXUa.js";import{G as x,H as S,I as B,J as v,K as z,c as w,o as _,b as e,a as E,w as s,r,z as V,B as I,p as M,k as h,s as i,t as d}from"./chunk-vendors.c9FUtYPc.js";const A={components:{ElTable:z,ElTableColumn:v,ElPagination:B,ElInput:S,ElButton:x},data(){return{createTaskPageParams:{keyword:"",currentPage:1,pageSize:10,architecture:""},createTaskRsp:[],selectedTasks:[],total:0,stopCreateBatchIds:[],loading:!0}},mounted(){this.createTaskPage()},methods:{handlePageChange(l){this.createTaskPageParams.currentPage=l,this.createTaskPage()},handleSizeChange(l){this.createTaskPageParams.currentPage=1,this.createTaskPageParams.pageSize=l,this.createTaskPage()},handleSelectionChange(l){this.stopCreateBatchIds=l},createTaskPage(){this.loading=!0,this.$axios.post("/oci/createTaskPage",{...this.createTaskPageParams}).then(l=>{this.createTaskRsp=l.data.data.records,this.total=l.data.data.total}).catch(l=>{console.error("Error:",l)}),this.loading=!1},handleStopTask(l){window.confirm("确定要停止 "+l.username+" 的这个开机任务吗?")?(this.selectedTasks.push(l.id),this.$axios.post("/oci/stopCreateBatch",{idList:this.selectedTasks}).then(p=>{p.data.success?h({message:p.data.msg,type:"success",duration:2e3}):h({message:p.data.msg,type:"error",duration:2e3}),this.createTaskPage()}).catch(p=>{console.error("Error:",p)}).finally(()=>{this.selectedTasks=[]})):this.$message.info("已取消")},handleStopCreateBatch(){window.confirm("确定要停止这些开机任务吗")?this.stopCreateBatch():this.$message.info("已取消")},stopCreateBatch(){const l=this.stopCreateBatchIds.map(t=>t.id);this.$axios.post("/oci/stopCreateBatch",{idList:l}).then(t=>{t.data.success?h({message:t.data.msg,type:"success",duration:2e3}):h({message:t.data.msg,type:"error",duration:2e3}),this.createTaskPage()}).catch(t=>{console.error("Error:",t)})}}},D={style:{"overflow-x":"auto"}};function R(l,t,p,U,o,c){const f=r("el-button"),k=r("el-input"),u=r("el-option"),P=r("el-select"),n=r("el-table-column"),m=r("el-tooltip"),g=r("el-tag"),T=r("el-table"),C=r("el-pagination"),b=I("loading");return _(),w("div",null,[e(f,{type:"success",style:{"margin-bottom":"20px"},onClick:c.createTaskPage},{default:s(()=>t[4]||(t[4]=[i(" 刷新 ")])),_:1},8,["onClick"]),e(k,{modelValue:o.createTaskPageParams.keyword,"onUpdate:modelValue":t[0]||(t[0]=a=>o.createTaskPageParams.keyword=a),placeholder:"模糊搜索配置名称/区域",onInput:c.createTaskPage,clearable:"","prefix-icon":"Search",style:{"margin-left":"20px",width:"200px","margin-bottom":"20px"}},null,8,["modelValue","onInput"]),e(P,{modelValue:o.createTaskPageParams.architecture,"onUpdate:modelValue":t[1]||(t[1]=a=>o.createTaskPageParams.architecture=a),onChange:c.createTaskPage,placeholder:"系统架构筛选",style:{"margin-left":"20px",width:"180px","margin-bottom":"20px"}},{default:s(()=>[e(u,{label:"全部",value:null}),e(u,{label:"ARM",value:"ARM"}),e(u,{label:"AMD",value:"AMD"}),e(u,{label:"AMD_E5",value:"AMD_E5"})]),_:1},8,["modelValue","onChange"]),e(f,{type:"danger",onClick:c.handleStopCreateBatch,disabled:!o.stopCreateBatchIds.length,style:{"margin-left":"20px","margin-bottom":"20px"}},{default:s(()=>t[5]||(t[5]=[i(" 批量停止 ")])),_:1},8,["onClick","disabled"]),E("div",D,[V((_(),M(T,{data:o.createTaskRsp,style:{width:"100%","min-width":"800px"},onSelectionChange:c.handleSelectionChange},{default:s(()=>[e(n,{type:"selection",width:"35"}),e(n,{label:"名称"},{default:s(({row:a})=>[e(m,{content:a.username,placement:"top"},{default:s(()=>[i(d(a.username),1)]),_:2},1032,["content"])]),_:1}),e(n,{label:"区域"},{default:s(({row:a})=>[e(m,{content:a.region,placement:"top"},{default:s(()=>[e(g,{type:"primary"},{default:s(()=>[i(d(a.region),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1}),e(n,{prop:"ocpus",label:"CPU（核数）"}),e(n,{prop:"memory",label:"内存（GB）"}),e(n,{prop:"disk",label:"硬盘（GB）"}),e(n,{prop:"operationSystem",label:"操作系统"}),e(n,{label:"系统架构"},{default:s(({row:a})=>[e(m,{content:a.architecture,placement:"top"},{default:s(()=>[e(g,{type:a.architecture==="ARM"?"success":"info"},{default:s(()=>[i(d(a.architecture),1)]),_:2},1032,["type"])]),_:2},1032,["content"])]),_:1}),e(n,{prop:"interval",label:"间隔（秒）"}),e(n,{label:"数量"},{default:s(({row:a})=>[e(g,{type:"primary"},{default:s(()=>[i(d(a.createNumbers),1)]),_:2},1024)]),_:1}),e(n,{label:"次数",sortable:""},{default:s(({row:a})=>[e(g,{type:"warning"},{default:s(()=>[i(d(a.counts),1)]),_:2},1024)]),_:1}),e(n,{sortable:"",prop:"createTime",label:"创建时间"},{default:s(({row:a})=>[e(m,{content:a.createTime,placement:"top"},{default:s(()=>[e(g,{type:"info"},{default:s(()=>[i(d(a.createTime),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1}),e(n,{fixed:"right",label:"操作",width:"100"},{default:s(({row:a})=>[e(f,{onClick:N=>c.handleStopTask(a),type:"danger",link:""},{default:s(()=>t[6]||(t[6]=[i("停止")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[b,o.loading]])]),e(C,{onCurrentChange:c.handlePageChange,onSizeChange:c.handleSizeChange,"current-page":o.createTaskPageParams.currentPage,"onUpdate:currentPage":t[2]||(t[2]=a=>o.createTaskPageParams.currentPage=a),"page-size":o.createTaskPageParams.pageSize,"onUpdate:pageSize":t[3]||(t[3]=a=>o.createTaskPageParams.pageSize=a),"page-sizes":[5,10,20,50],total:o.total,layout:"total, sizes, prev, pager, next, jumper",style:{"margin-top":"20px"}},null,8,["onCurrentChange","onSizeChange","current-page","page-size","total"])])}const j=y(A,[["render",R]]);export{j as default};
