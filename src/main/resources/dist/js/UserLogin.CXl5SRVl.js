import{h as z,c as p,o as u,a as o,b as n,F as f,j as y,n as m,w as a,r as c,k as d,t as b,l as B,m as C,p as M,q as _,s as v}from"./chunk-vendors.aIPSPsZX.js";import{_ as T}from"./index.2P0gX5TQ.js";const E={components:{DocumentCopy:z},mounted(){this.getEnableMfa(),this.getGoogleClientId(),this.isDarkMode=localStorage.getItem("theme")==="dark",this.loadGoogleSDK()},computed:{themeText(){return this.isDarkMode?"å¼€ç¯ğŸ’¡":"å…³ç¯ğŸŒ™"}},data(){return{loginParams:{account:"",password:"",mfaCode:null},loading:!1,googleLoading:!1,enableMfa:!1,googleClientId:"",isDarkMode:localStorage.getItem("theme")==="dark"}},methods:{loadGoogleSDK(){if(document.getElementById("google-sdk"))return;const t=document.createElement("script");t.id="google-sdk",t.src="https://accounts.google.com/gsi/client",t.async=!0,t.defer=!0,document.head.appendChild(t)},async getGoogleClientId(){try{const t=await this.$axios.post("/sys/getGoogleClientId",{});t.data.success&&t.data.data&&(this.googleClientId=t.data.data,this.initializeGoogleLogin())}catch(t){console.log("Google login not configured:",t.message),this.googleClientId=""}},initializeGoogleLogin(){const t=setInterval(()=>{window.google&&window.google.accounts&&(clearInterval(t),window.google.accounts.id.initialize({client_id:this.googleClientId,callback:this.handleGoogleCallback,auto_select:!1,cancel_on_tap_outside:!0,ux_mode:"popup"}),this.$nextTick(()=>{const e=document.getElementById("google-signin-button");e&&window.google.accounts.id.renderButton(e,{type:"standard",theme:"outline",size:"large",width:0})}))},100);setTimeout(()=>clearInterval(t),1e4)},triggerGoogleLogin(){if(!window.google||!window.google.accounts){d({message:"Google SDK åŠ è½½ä¸­ï¼Œè¯·ç¨åå†è¯•",type:"warning",duration:2e3});return}const t=document.querySelector('#google-signin-button > div[role="button"]');t?t.click():window.google.accounts.id.prompt(e=>{(e.isNotDisplayed()||e.isSkippedMoment())&&console.log("One Tap not available, using fallback")})},async handleGoogleCallback(t){this.googleLoading=!0;try{const e=await this.$axios.post("/sys/googleLogin",{credential:t.credential});if(e.data.success){d({message:e.data.msg||"Google ç™»å½•æˆåŠŸ",type:"success",duration:2e3});let i=e.data.data;sessionStorage.setItem("token",i.token),localStorage.setItem("currentVersion",i.currentVersion),localStorage.setItem("latestVersion",i.latestVersion),setTimeout(()=>{this.$router.push("/dashboard")},1e3)}else d({message:e.data.msg||"Google ç™»å½•å¤±è´¥",type:"error",duration:2e3})}catch(e){console.error("Google login error:",e),d({message:"Google ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•",type:"error",duration:2e3})}finally{this.googleLoading=!1}},async pasteFromClipboard(){try{if(navigator.clipboard&&navigator.clipboard.readText){const t=await navigator.clipboard.readText();t&&(this.loginParams.mfaCode=t.trim(),d({message:"éªŒè¯ç å·²ç²˜è´´",type:"success",duration:1500}))}}catch{d({message:"ç²˜è´´å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥",type:"warning",duration:2e3})}},getGridLineStyle(t,e){const i=t*10+"%",g=Math.random()*3;return e?{top:i,animationDelay:`${g}s`}:{left:i,animationDelay:`${g}s`}},getStarStyle(t){const e=Math.random()*3+1,i=Math.random()*3+2,g=Math.random()*5;return{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,width:`${e}px`,height:`${e}px`,animationDelay:`${g}s`,animationDuration:`${i}s`}},getShapeStyle(t){const e=t*2,i=15+t*3,g=Math.random()*100,r=Math.random()*100;return{left:`${g}%`,top:`${r}%`,animationDelay:`${e}s`,animationDuration:`${i}s`}},getCodeColumnStyle(t){const e=t*6.67+"%",i=10+Math.random()*5,g=Math.random()*8;return{left:e,animationDelay:`${g}s`,animationDuration:`${i}s`}},getRandomChar(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789<>{}[]()@#$%&*";return t[Math.floor(Math.random()*t.length)]},toggleTheme(){const t=document.documentElement.classList.toggle("dark");localStorage.setItem("theme",t?"dark":"light"),this.isDarkMode=t},getEnableMfa(){this.$axios.post("/sys/getEnableMfa",{}).then(t=>{t.data.success&&(this.enableMfa=t.data.data)}).catch(t=>{console.log("MFA config not available:",t.message),this.enableMfa=!1})},async login(){if(this.loginParams.account==="yohann"&&this.loginParams.password==="yohann"){d({message:"è¯¥è´¦å·ä¸ºé»˜è®¤è´¦å·ï¼Œè¯·ä¿®æ”¹å¹¶é‡å¯åå†å°è¯•ç™»å½•",type:"error",duration:2e3});return}this.loading=!0;try{const t=await this.$axios.post("/sys/login",{...this.loginParams});if(t.data.success){d({message:t.data.msg,type:"success",duration:2e3});let e=t.data.data;sessionStorage.setItem("token",e.token),localStorage.setItem("currentVersion",e.currentVersion),localStorage.setItem("latestVersion",e.latestVersion),setTimeout(()=>{this.$router.push("/dashboard")},1e3)}else d({message:t.data.msg,type:"error",duration:2e3}),this.loading=!1}catch(t){console.error("Error:",t),d({message:"ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•",type:"error",duration:2e3}),this.loading=!1}}}},P={class:"login-container"},F={class:"background"},A={class:"grid-lines"},R={class:"stars-container"},K={class:"floating-shapes"},N={class:"code-rain"};function Q(t,e,i,g,r,s){const w=c("el-input"),h=c("el-form-item"),S=c("DocumentCopy"),x=c("el-icon"),k=c("el-button"),L=c("el-form"),I=c("el-card"),D=c("el-link"),G=c("el-footer");return u(),p("div",P,[o("div",F,[o("div",A,[(u(),p(f,null,y(10,l=>o("div",{class:"grid-line horizontal",key:"h-"+l,style:m(s.getGridLineStyle(l,!0))},null,4)),64)),(u(),p(f,null,y(10,l=>o("div",{class:"grid-line vertical",key:"v-"+l,style:m(s.getGridLineStyle(l,!1))},null,4)),64))]),o("div",R,[(u(),p(f,null,y(50,l=>o("div",{class:"star",key:"star-"+l,style:m(s.getStarStyle(l))},null,4)),64))]),e[3]||(e[3]=o("div",{class:"scan-line"},null,-1)),e[4]||(e[4]=o("div",{class:"glow glow-1"},null,-1)),e[5]||(e[5]=o("div",{class:"glow glow-2"},null,-1)),o("div",K,[o("div",{class:"shape hexagon",style:m(s.getShapeStyle(1))},null,4),o("div",{class:"shape circle",style:m(s.getShapeStyle(2))},null,4),o("div",{class:"shape square",style:m(s.getShapeStyle(3))},null,4)]),o("div",N,[(u(),p(f,null,y(15,l=>o("div",{class:"code-column",key:"code-"+l,style:m(s.getCodeColumnStyle(l))},[(u(),p(f,null,y(20,V=>o("span",{key:V},b(s.getRandomChar()),1)),64))],4)),64))])]),n(I,{class:"login-card"},{default:a(()=>[e[13]||(e[13]=o("div",{class:"oracle-logo"},[o("svg",{viewBox:"0 0 397 57",xmlns:"http://www.w3.org/2000/svg"},[o("g",{fill:"#C74634"},[o("ellipse",{cx:"28.5",cy:"28.5",rx:"26",ry:"19",fill:"none",stroke:"#C74634","stroke-width":"5"}),o("path",{d:"M70 10 L70 47 M70 10 L90 10 Q98 10 98 18 Q98 25 90 25 L70 25 M90 25 L98 47"}),o("path",{d:"M110 47 L120 10 L130 47 M113 32 L127 32"}),o("path",{d:"M160 18 Q150 10 140 18 Q135 28.5 140 39 Q150 47 160 39"}),o("path",{d:"M175 10 L175 47 L190 47"}),o("path",{d:"M205 10 L235 10 M205 10 L205 47 M205 28.5 L230 28.5 M205 47 L235 47"})]),o("text",{x:"250",y:"40","font-family":"Arial, sans-serif","font-size":"28","font-weight":"600",fill:"#312D2A"},"Cloud")])],-1)),e[14]||(e[14]=o("h2",{class:"login-title"},"OCI Helper",-1)),e[15]||(e[15]=o("p",{class:"login-subtitle"},"Oracle Cloud Infrastructure Management",-1)),n(L,{onSubmit:C(s.login,["prevent"]),onKeydown:B(C(s.login,["prevent"]),["enter"])},{default:a(()=>[n(h,{label:"","label-width":"0%"},{default:a(()=>[n(w,{modelValue:r.loginParams.account,"onUpdate:modelValue":e[0]||(e[0]=l=>r.loginParams.account=l),placeholder:"è´¦å·",clearable:"",size:"large"},{prefix:a(()=>e[6]||(e[6]=[o("i",{class:"el-icon-user"},null,-1)])),_:1},8,["modelValue"])]),_:1}),n(h,{label:"","label-width":"0%"},{default:a(()=>[n(w,{"show-password":"",modelValue:r.loginParams.password,"onUpdate:modelValue":e[1]||(e[1]=l=>r.loginParams.password=l),placeholder:"å¯†ç ",type:"password",clearable:"",size:"large"},{prefix:a(()=>e[7]||(e[7]=[o("i",{class:"el-icon-lock"},null,-1)])),_:1},8,["modelValue"])]),_:1}),r.enableMfa?(u(),M(h,{key:0},{default:a(()=>[n(w,{"show-password":"",modelValue:r.loginParams.mfaCode,"onUpdate:modelValue":e[2]||(e[2]=l=>r.loginParams.mfaCode=l),placeholder:"MFAéªŒè¯ç ",clearable:"",size:"large"},{prefix:a(()=>e[8]||(e[8]=[o("i",{class:"el-icon-mobile-phone"},null,-1)])),suffix:a(()=>[n(x,{onClick:s.pasteFromClipboard,class:"paste-icon",title:"ç²˜è´´éªŒè¯ç "},{default:a(()=>[n(S)]),_:1},8,["onClick"])]),_:1},8,["modelValue"])]),_:1})):_("",!0),n(h,{style:{"text-align":"center"},class:"login-button-container"},{default:a(()=>[n(k,{type:"primary",onClick:s.login,loading:r.loading,class:"login-button",size:"large"},{default:a(()=>e[9]||(e[9]=[v("Sign In")])),_:1},8,["onClick","loading"])]),_:1}),e[12]||(e[12]=o("div",{class:"login-divider-wrapper"},[o("div",{class:"divider-line"}),o("span",{class:"divider-text"},"OR"),o("div",{class:"divider-line"})],-1)),r.googleClientId?(u(),M(h,{key:1,style:{"text-align":"center"}},{default:a(()=>[e[11]||(e[11]=o("div",{id:"google-signin-button",style:{position:"absolute",left:"-9999px",opacity:"0"}},null,-1)),n(k,{onClick:s.triggerGoogleLogin,loading:r.googleLoading,class:"google-button",size:"large"},{default:a(()=>e[10]||(e[10]=[o("svg",{class:"google-icon",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),o("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),o("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),o("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})],-1),o("span",null,"Sign in with Google",-1)])),_:1},8,["onClick","loading"])]),_:1})):_("",!0)]),_:1},8,["onSubmit","onKeydown"])]),_:1}),n(G,{class:"login-footer"},{default:a(()=>[n(D,{href:"https://github.com/Yohann0617",target:"_blank"},{default:a(()=>e[16]||(e[16]=[v("Â© Yohann All Rights Reserved")])),_:1}),n(k,{onClick:s.toggleTheme,class:"theme-button",link:""},{default:a(()=>[v(b(s.themeText),1)]),_:1},8,["onClick"])]),_:1})])}const U=T(E,[["render",Q],["__scopeId","data-v-4c98fb0b"]]);export{U as default};
